<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="version" content="6.0.3">
<link rel="shortcut icon" href="../icons/favicon.ico" type="image/vnd.microsoft.icon">
<title>Unit Tests</title>
<link href="man.css" type="text/css" rel="stylesheet">
<meta name="organisation" content="Quality First Software GmbH">
<meta name="copyright" content="(C) 1999-2022 Quality First Software GmbH">
</head>
<body bgcolor="white">
<a name="usec_unittests"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="naviheader">
<tr>
<td class="margin"></td><td class="navicon"><a href="manual.html"><img src="../icons/linktop.png" width="34" height="36" border="0" alt="Top" title="Top"></a></td><td class="navicon"><a href="contents.html#table-of-contents"><img src="../icons/linktoc.png" width="34" height="36" border="0" alt="Inhaltsverzeichnis" title="Inhaltsverzeichnis"></a></td><td class="navicon"><a href="user_scripting.html#usec_scripting"><img src="../icons/linkprev.png" width="34" height="36" border="0" alt="Vorheriges Kapitel: 11&nbsp;Skripting" title="Vorheriges Kapitel: 11&nbsp;Skripting"></a></td><td class="navicon"><a href="user_webtesting.html#usec_webtesting"><img src="../icons/linkcont.png" width="34" height="36" border="0" alt="N&auml;chste Seite: 13&nbsp;Testen von Webseiten" title="N&auml;chste Seite: 13&nbsp;Testen von Webseiten"></a></td><td class="navicon"><a href="user_webtesting.html#usec_webtesting"><img src="../icons/linknext.png" width="34" height="36" border="0" alt="N&auml;chstes Kapitel: 13&nbsp;Testen von Webseiten" title="N&auml;chstes Kapitel: 13&nbsp;Testen von Webseiten"></a></td><td class="navicon"><a href="user.html#sec_user"><img src="../icons/linkup.png" width="34" height="36" border="0" alt="Kapitel-&Uuml;bersicht: I&nbsp;Anwenderhandbuch" title="Kapitel-&Uuml;bersicht: I&nbsp;Anwenderhandbuch"></a></td><td class="navicon"><a href="../../manual_de.pdf" target="_parent"><img src="../icons/linkpdf.png" width="34" height="36" border="0" alt="PDF Version" title="PDF Version"></a></td><td class="homeicon"><a href="http://www.qfs.de/de/qftest/index.html" target="_parent"><img src="../icons/qftest.png" width="127" height="42" border="0" alt="QF-Test" title="QF-Test"></a></td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="naviversion">
<tr>
<td>Version 6.0.3</td>
</tr>
</table>
    
<h3 class="header-container h3">
<div>
<span class="numtitle"><a href="contents.html#toc_usec_unittests">12</a></span>
</div>
<a href="contents.html#toc_usec_unittests">Unit Tests</a>
</h3>
    
    
<p>
      Unit Tests oder Komponententests dienen der &Uuml;berpr&uuml;fung von funktionalen Einheiten.
      Sie sollen gezielt die Funktionalit&auml;t der Komponenten testen, isoliert von anderen Komponenten.
      Aus diesem Grund besitzen sie eine deutlich geringere Komplexit&auml;t
      im Vergleich zu Integrations- bzw. Systemtests, welche erheblich mehr Entwicklungsaufwand erfordern.
    </p>
    
<p>
      Mit dem <a href="miscnodes.html#step_UnitStep" shape="rect">'Unit Test'</a> Knoten k&ouml;nnen Unit Tests mit Hilfe des JUnit-Frameworks ausgef&uuml;hrt werden.
      Sowohl der Report als auch das Protokoll zeigen deren Ergebnisse an.
    </p>
    
<p>
      Der 'Unit Test' Knoten kann Tests aus zwei unterschiedlichen Quellen starten.
      Hierbei werden die Parameter des Knotens dynamisch an den Anwendungsfall angepasst.
      Es k&ouml;nnen Java-Klassen angegeben
      werden, die JUnit-Testf&auml;lle enthalten, oder Unit-Test-Skripte mit QF-Test geschrieben werden. Dieses Kapitel
      erl&auml;utert die unterschiedlichen M&ouml;glichkeiten.
    </p>
    
<p>
      F&uuml;r die Ausf&uuml;hrung der JUnit Tests wird das JUnit 5 Framework verwendet.
      Dieses erm&ouml;glicht es einerseits JUnit 5 Tests mit Hilfe der JUnit Jupiter Engine auszuf&uuml;hren.
      Andererseite kann die JUnit Vintage Engine sowohl JUnit 4 als auch JUnit 3 Tests ausf&uuml;hren.
      Mit JUnit 5 ist es m&ouml;glich parametrisierte Tests zu schreiben, Tests innerhalb von Klassen einzubetten
      und den den Reportnamen des Tests zu &auml;ndern.
    </p>
    
    

    
<a name="sec_N84313"></a>
      
<h4 class="header-container h4">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_N84313">12.1</a></span>
</div>
<a href="contents.html#toc_sec_N84313">Java-Klassen als Quelle f&uuml;r Unit Tests</a>
</h4>
        
<p>
        Es ist m&ouml;glich Unit Tests aus geladenen Jar-Ordnern und Class-Dateien auszuf&uuml;hren.
        Es k&ouml;nnen aber auch Tests ausgef&uuml;hrt werden, die bereits mit dem Start des SUTs geladen wurden.
        QF-Test f&uuml;hrt dabei die angegebenen <a href="miscnodes.html#att_UnitStep_classes" shape="rect">'Test-Klassen'</a> als Testschritte aus. Das folgende Beispiel soll den Aufbau eines Unit Tests mit Java-Klassen verdeutlichen.
        </p>
        
<a name="figure_12.1"></a><a name="figure_12.1"></a>
<table class="figure" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3"><a href="images/UnitStepJavaClassesExample.png" target="_blank"><img src="images/UnitStepJavaClassesExample.png" alt="Beispiel eines Unit Test Knotens Java-Klassen" texscale=".66" width="393" height="564"></a></td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption"><a href="figures.html#list-of-figures">Abbildung&nbsp;12.1</a>:&nbsp;&nbsp;Unit Test-Knoten mit Java-Klassen</td><td class="captionglue"></td>
</tr>
</table>
        
<table class="example" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3">
<table width="100%" cellspacing="0">
<tr>
<td class="example"><pre>package de.qfs.test;

import org.junit.Assert;
import org.junit.Test;

public class StringTest {

    @Test
    public void testubstring() {
        String s = new String("Langer Text");
        s = s.substring(7, 11);
        assert("Text".equals(s));
    }

    @Test
    public void testReplace() {
        String s = new String("Beispiel");
        s = s.replace('e', 'i');
        Assert.assertEquals("Biispiil", s);
    }
}</pre></td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption">Beispiel&nbsp;12.1:&nbsp;&nbsp;Code der Java Unit Test-Klasse</td><td class="captionglue"></td>
</tr>
</table>
        
<p>
        Die Klasse de.qfs.test.StringTest muss sich im unittests.jar befinden.
        Der Pfad zu dieser Jar-Datei wird unter <a href="miscnodes.html#att_UnitStep_includefiles" shape="rect">'Classpath'</a> angegeben.
        Dieser Pfad wird relativ zum Verzeichnis der aktuellen Suite ermittelt.
        In diesem Beispiel liegt die jar-Datei direkt im Verzeichnis der Testsuite.
        </p>
      
<p>
        JUnit-Test-Klassen sind Java-Klassen, deren Methoden die <code>@Test</code>-Annotation besitzen.
        Der 'Unit Test' Knoten f&uuml;hrt alle Klassen aus, die unter <a href="miscnodes.html#att_UnitStep_classes" shape="rect">'Test-Klassen'</a> angegeben sind.
        Deshalb kann ein 'Unit Test' Knoten auch mehrere Test-Klassen ausf&uuml;hren.
      </p>


    
    

    
<a name="usec_unittestscriptbasics"></a>
      
<h4 class="header-container h4">
<div>
<span class="numtitle"><a href="contents.html#toc_usec_unittestscriptbasics">12.2</a></span>
</div>
<a href="contents.html#toc_usec_unittestscriptbasics">Grundlagen der Test-Skripte</a>
</h4>
        
<p>
         Die zweite M&ouml;glichkeit, die Unit Test Knoten bieten, ist den Unit Test direkt im Knoten zu kodieren. Hierf&uuml;r k&ouml;nnen die in QF-Test vorhanden Skriptsprachen genutzt werden.
         Groovy ist dazu am besten geeignet, denn es erm&ouml;glicht die Verwendung von Java-Annotationen.
         Das Framework hierf&uuml;r ist JUnit.
        </p>
         
<a name="sec_N84392"></a>
        
<h5 class="header-container h5">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_N84392">12.2.1</a></span>
</div>
<a href="contents.html#toc_sec_N84392">Groovy Unit Tests</a>
</h5>
            
<p>
        
<table class="example" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3">
<table width="100%" cellspacing="0">
<tr>
<td class="example"><pre>
@BeforeClass
static void onbefore(){
    println("Vorbereitung")
}

@Test(expected=IndexOutOfBoundsException.class)
void indexOutOfBoundsAccess() {
    def numbers = [1,2,3,4]
    numbers.get(4)
}

@Test
void noFailure() {
    assert true
}</pre></td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption">Beispiel&nbsp;12.2:&nbsp;&nbsp;Unit Test-Skript mit Groovy</td><td class="captionglue"></td>
</tr>
</table>
        
</p>
        
<p>
        In Groovy werden die f&uuml;r JUnit 4 erforderlichen Klassen automatisch importiert.
        Und wie in Java werden alle Tests mit der <code>@Test</code>-Annotation ausgef&uuml;hrt.
        Der <code>expected</code> Parameter der <code>@Test</code>-Annotation erlaubt es, erwartete Exceptions zu ignorieren.
        Die Methode, welche mit der <code>@BeforeClass</code>-Annotation gekennzeichnet ist, wird einmal vor der Ausf&uuml;hrung der Test-Methoden ausgef&uuml;hrt.
        </p>
         
          
<a name="usec_unittestscriptjython"></a>
        
<h5 class="header-container h5">
<div>
<span class="numtitle"><a href="contents.html#toc_usec_unittestscriptjython">12.2.2</a></span>
</div>
<a href="contents.html#toc_usec_unittestscriptjython">Jython Unit Tests</a>
</h5>
        
<p>
          
<table class="example" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3">
<table width="100%" cellspacing="0">
<tr>
<td class="example"><pre>def setUp(self):
    print "Vorbereitung"

def testMathCeil(self):
    import math
    self.assertEqual(2, math.ceil(1.01))
    self.assertEqual(1, math.ceil(0.5))
    self.assertEqual(0, math.ceil(-0.5))
    self.assertEqual(-1, math.ceil(-1.1))

def testMultiplication(self):
    self.assertAlmostEqual(0.3, 0.1 * 3)
    </pre></td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption">Beispiel&nbsp;12.3:&nbsp;&nbsp;Unit Test Skript mit Jython</td><td class="captionglue"></td>
</tr>
</table>
        
<p>
        Da in Jython keine Java-Annotationen verwendet werden k&ouml;nnen, werden die Skripte als JUnit-3-Tests ausgef&uuml;hrt.

        Alle Funktionen, die mit dem Schl&uuml;sselwort <code>test</code> beginnen, werden als Checks ausgef&uuml;hrt.
        Die Methoden m&uuml;ssen den Parameter <code>self</code> besitzen, da diese von einer Klasse umschlossen werden.
        Die <code>setUp</code>-Methode wird vor Beginn der Tests ausgef&uuml;hrt.
        </p>

        
</p>
         
          
<a name="sec_N84458"></a>
        
<h5 class="header-container h5">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_N84458">12.2.3</a></span>
</div>
<a href="contents.html#toc_sec_N84458">JavaScript Unit Test</a>
</h5>
        
<p>
        
<table class="example" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3">
<table width="100%" cellspacing="0">
<tr>
<td class="example"><pre>setUp(){
    print("Vorbereitung");
}
tearDown() {
    print("Nachbereitung");
}
testUpperCase(){
    let s = "text";
    assertEquals("TEXT", s.toUpperCase());
}
testOk() {
    assertTrue(true);
}</pre></td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption">Beispiel&nbsp;12.4:&nbsp;&nbsp;Unit Test Skript mit JavaScript</td><td class="captionglue"></td>
</tr>
</table>
        
</p>
        
<p>
        Da auch JavaScript keine Java-Annotationen unterst&uuml;tzt, k&ouml;nnen nur JUnit-3 Tests
        (vgl. <a href="#usec_unittestscriptjython">Abschnitt 12.2.2</a>) ausgef&uuml;hrt werden.
        Wie in Jython werden alle Funktionen, die mit dem Schl&uuml;sselwort <code>test</code> beginnen, als Checks ausgef&uuml;hrt.
        </p>
      
    

    
    

    
<a name="sec_N84491"></a>
        
<h4 class="header-container h4">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_N84491">12.3</a></span>
</div>
<a href="contents.html#toc_sec_N84491">Injections</a>
</h4>
        
<p>
        Es ist m&ouml;glich, den <a href="miscnodes.html#step_UnitStep" shape="rect">'Unit Test'</a> Knoten f&uuml;r sogenannte 'LiveTests' zu nutzen.
        QF-Test f&uuml;hrt die Unit Tests hierbei in einem laufenden SUT aus.
        Um in den JUnit-Test-Klassen Objekte wie Komponenten, QF-Test-Variablen oder WebDriver-Objekte verwenden zu k&ouml;nnen,
        m&uuml;ssen diese in den Code 'injiziert' werden.
        </p>
         
<a name="sec_N84506"></a>
        
<h5 class="header-container h5">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_N84506">12.3.1</a></span>
</div>
<a href="contents.html#toc_sec_N84506">Komponenten in den Unit Tests verwenden</a>
</h5>
        
<p>
        
<table class="example" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3">
<table width="100%" cellspacing="0">
<tr>
<td class="example"><pre>import static org.junit.Assert.*;
import javax.swing.JComponent;
import org.junit.Test;

public class ComponentTest
{

    /** The component to test in this unit test */
    static JComponent component;

    /** Expected value */
    static String accessibleName;

    @Test
    public void accessibleNameIsCorrect()
    {
        /** component and accessible name are injected at run-time */
        final String currentName =
            component.getAccessibleContext().getAccessibleName();
        assertEquals(accessibleName,currentName);
    }
}</pre></td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption">Beispiel&nbsp;12.5:&nbsp;&nbsp;Java Unit Test-Klasse</td><td class="captionglue"></td>
</tr>
</table>
        
</p>
        
<p>

        
</p>
        
<a name="figure_12.2"></a><a name="figure_12.2"></a>
<table class="figure" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3"><a href="images/UnitStepInjectComponentExample.png" target="_blank"><img src="images/UnitStepInjectComponentExample.png" alt="Beispiel eines Unit Test Knotens mit Injections" texscale=".66" width="393" height="656"></a></td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption"><a href="figures.html#list-of-figures">Abbildung&nbsp;12.2</a>:&nbsp;&nbsp;Beispiel eines 'Unit Test' Knotens mit Injections</td><td class="captionglue"></td>
</tr>
</table>
      
<p>
      In diesem Beispiel werden gleich zwei Objekte in die Unit Tests &uuml;bertragen. Eine Komponente und eine QF-Test-Variable.
      Der Parameter 'Feld' der Injection entspricht hier dem Namen des Felds <code>static JComponent component;</code> der Java-Klasse.
      Das Java-Feld muss hierf&uuml;r <code>static</code> sein.
      </p>
      
      
<a name="usec_unitinjecttcomponents"></a>
      
<h5 class="header-container h5">
<div>
<span class="numtitle"><a href="contents.html#toc_usec_unitinjecttcomponents">12.3.2</a></span>
</div>
<a href="contents.html#toc_usec_unitinjecttcomponents">WebDriver-Injections</a>
</h5>
              
<p>
        
<table class="example" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3">
<table width="100%" cellspacing="0">
<tr>
<td class="example"><pre>import static org.junit.Assert.*;
import org.junit.Test;
import org.openqa.selenium.WebDriver;

public class WebdriverTest
{
    /** The driver of the window currently opened by QF-Test. */
    static WebDriver driver;

    @Test
    public void urlIsCorrectedLoaded()
    {
        // driver is injected at run-time
        final String currentUrl = driver.getCurrentUrl();
        assertEquals("http://www.example.com", currentUrl);
    }

}</pre></td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption">Beispiel&nbsp;12.6:&nbsp;&nbsp;Java Unit Test mit WebDriver-Injections</td><td class="captionglue"></td>
</tr>
</table>
        
</p>
        
<a name="figure_12.3"></a><a name="figure_12.3"></a>
<table class="figure" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3"><a href="images/UnitStepInjectWebDriverExample.png" target="_blank"><img src="images/UnitStepInjectWebDriverExample.png" alt="Beispiel eines Unit Test-Knotens mit Injections" texscale=".66" width="393" height="656"></a></td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption"><a href="figures.html#list-of-figures">Abbildung&nbsp;12.3</a>:&nbsp;&nbsp;Beispiel eines 'Unit Test'-Knotens mit WebDriver-Injections</td><td class="captionglue"></td>
</tr>
</table>
      
<p>
        Dieses Beispiel zeigt wie ein WebDriver-Objekt in die Java-Klasse &uuml;bertragen wird.

        QF-Test ermittelt den Wert der WebDriver-Injection anhand des angegebenen Clients, falls kein expliziter Wert gesetzt ist.
      </p>
       


    
    

    
<a name="usec_unitreport"></a>
      
<h4 class="header-container h4">
<div>
<span class="numtitle"><a href="contents.html#toc_usec_unitreport">12.4</a></span>
</div>
<a href="contents.html#toc_usec_unitreport">Unit Tests im Report</a>
</h4>
           
<p>
           Der gro&szlig;e Vorteil des <a href="miscnodes.html#step_UnitStep" shape="rect">'Unit Test'</a> Knotens ist, dass dieser im HTML-Report erscheint.
           Die Unit Tests werden als Testf&auml;lle interpretiert. Damit diese korrekt im Report erscheinen,
           muss ein Testfall ausgef&uuml;hrt werden,
           in welchem der Unit Test-Knoten enthalten ist.
           </p>
        
<p>
        
<a name="figure_12.4"></a><a name="figure_12.4"></a>
<table class="figure" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3"><a href="images/unittest_report_de.png" target="_blank"><img src="images/unittest_report_de.png" alt="Beispiel eines Unit Test Reports" texscale=".66" width="1036" height="793"></a></td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption"><a href="figures.html#list-of-figures">Abbildung&nbsp;12.4</a>:&nbsp;&nbsp;Unit Test Report</td><td class="captionglue"></td>
</tr>
</table>
      
</p>
    

    
  
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="navifooter">
<tr>
<td class="margin"></td><td class="navicon"><a href="manual.html"><img src="../icons/linktop.png" width="34" height="36" border="0" alt="Top" title="Top"></a></td><td class="navicon"><a href="contents.html#table-of-contents"><img src="../icons/linktoc.png" width="34" height="36" border="0" alt="Inhaltsverzeichnis" title="Inhaltsverzeichnis"></a></td><td class="navicon"><a href="user_scripting.html#usec_scripting"><img src="../icons/linkprev.png" width="34" height="36" border="0" alt="Vorheriges Kapitel: 11&nbsp;Skripting" title="Vorheriges Kapitel: 11&nbsp;Skripting"></a></td><td class="navicon"><a href="user_webtesting.html#usec_webtesting"><img src="../icons/linkcont.png" width="34" height="36" border="0" alt="N&auml;chste Seite: 13&nbsp;Testen von Webseiten" title="N&auml;chste Seite: 13&nbsp;Testen von Webseiten"></a></td><td class="navicon"><a href="user_webtesting.html#usec_webtesting"><img src="../icons/linknext.png" width="34" height="36" border="0" alt="N&auml;chstes Kapitel: 13&nbsp;Testen von Webseiten" title="N&auml;chstes Kapitel: 13&nbsp;Testen von Webseiten"></a></td><td class="navicon"><a href="user.html#sec_user"><img src="../icons/linkup.png" width="34" height="36" border="0" alt="Kapitel-&Uuml;bersicht: I&nbsp;Anwenderhandbuch" title="Kapitel-&Uuml;bersicht: I&nbsp;Anwenderhandbuch"></a></td><td class="navicon"><a href="../../manual_de.pdf" target="_parent"><img src="../icons/linkpdf.png" width="34" height="36" border="0" alt="PDF Version" title="PDF Version"></a></td><td class="navcopymod">Letzte &Auml;nderung: 6.9.2022<br>Copyright &copy; 1999-2022 Quality First Software GmbH</td>
</tr>
</table>
</body>
</html>
