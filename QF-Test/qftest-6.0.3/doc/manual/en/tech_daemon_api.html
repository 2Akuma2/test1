<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="version" content="6.0.3">
<link rel="shortcut icon" href="../icons/favicon.ico" type="image/vnd.microsoft.icon">
<title>Daemon API</title>
<link href="man.css" type="text/css" rel="stylesheet">
<meta name="organisation" content="Quality First Software GmbH">
<meta name="copyright" content="(C) 1999-2022 Quality First Software GmbH">
</head>
<body bgcolor="white">
<a name="sec_daemon_api"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="naviheader">
<tr>
<td class="margin"></td><td class="navicon"><a href="manual.html"><img src="../icons/linktop.png" width="34" height="36" border="0" alt="Top" title="Top"></a></td><td class="navicon"><a href="contents.html#table-of-contents"><img src="../icons/linktoc.png" width="34" height="36" border="0" alt="Table of contents" title="Table of contents"></a></td><td class="navicon"><a href="tech_daemon_concepts.html#sec_N185963"><img src="../icons/linkprev.png" width="34" height="36" border="0" alt="Previous Chapter: 51.1&nbsp;Daemon concepts" title="Previous Chapter: 51.1&nbsp;Daemon concepts"></a></td><td class="navicon"><a href="tech_daemon_security.html#sec_daemon_security"><img src="../icons/linkcont.png" width="34" height="36" border="0" alt="Next Page: 51.3&nbsp;Daemon security considerations" title="Next Page: 51.3&nbsp;Daemon security considerations"></a></td><td class="navicon"><a href="tech_daemon_security.html#sec_daemon_security"><img src="../icons/linknext.png" width="34" height="36" border="0" alt="Next Chapter: 51.3&nbsp;Daemon security considerations" title="Next Chapter: 51.3&nbsp;Daemon security considerations"></a></td><td class="navicon"><a href="tech_daemon.html#sec_daemon"><img src="../icons/linkup.png" width="34" height="36" border="0" alt="Chapter Overview: 51&nbsp;Daemon mode" title="Chapter Overview: 51&nbsp;Daemon mode"></a></td><td class="navicon"><a href="../../manual_en.pdf" target="_parent"><img src="../icons/linkpdf.png" width="34" height="36" border="0" alt="PDF version" title="PDF version"></a></td><td class="homeicon"><a href="http://www.qfs.de/en/qftest/index.html" target="_parent"><img src="../icons/qftest.png" width="127" height="42" border="0" alt="QF-Test" title="QF-Test"></a></td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="naviversion">
<tr>
<td>Version 6.0.3</td>
</tr>
</table>
        
<h4 class="header-container h4">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_daemon_api">51.2</a></span>
</div>
<a href="contents.html#toc_sec_daemon_api">Daemon API</a>
</h4>
        
<p>
          The daemon API provides all methods necessary to directly control test execution via a
          QF-Test daemon. Typically the following relatively simple steps need to be implemented:
        </p>
      
<p>
        
<span class="margin"><span class="note">Note</span></span>
        When writing an application based on the daemon API you need to take security
        considerations into account and either disable security or set some RMI-specific
        properties as described in <a href="tech_daemon_security.html#sec_daemon_security">section 51.3</a>.
      </p>
        
<ul>
          
<li>
            Get hold of a <code>Daemon</code> using the <code>DaemonLocator</code> service.
          </li>
          
<li>
            Either get hold of the shared <code>TestRunDaemon</code> or have the <code>Daemon</code>
            create a <code>TestRunDaemon</code>. You can use the <code>TestRunDaemon</code> to
            define global variables and the root directory of your test-suites for the upcoming
            test-runs.
          </li>
          
<li>
            Either get hold of the <code>TestRunDaemon's</code> shared <code>DaemonRunContext</code>
            or have it create one or more <code>DaemonRunContext</code> instances. A
            <code>DaemonRunContext</code> represents one test execution context for functional or
            load testing. Each <code>DaemonRunContext</code> is independent of the others, except
            for a group of contexts created via <code>TestRunDaemon.createContexts(int
              threads)</code> which creates a group of related contexts for load-testing similar to
            running QF-Test with the <a href="tech_execution.html#arg_threads" shape="rect"><code>-threads &lt;number&gt;</code></a> command line argument. Each
            <code>DaemonRunContext</code> requires one QF-Test development or runtime license during
            its lifetime.
          </li>
          
<li>
            Now you can tell the <code>DaemonRunContext</code> to execute tests on your behalf,
            either whole test-suites or <a href="sequences.html#step_TestSet" shape="rect">'Test-set'</a> or <a href="sequences.html#step_TestCase" shape="rect">'Test-case'</a> nodes. With properly implemented
            <a href="dependencies.html#step_Dependency" shape="rect">'Dependencies'</a> you can have a Daemon execute 'Test-cases' on your behalf in any
            arbitrary order without explicitly having to take care of any setup or cleanup tasks.
          </li>
          
<li>
            The <code>DaemonRunContext</code> also has methods to check the current state of a
            test-run or wait for it to finish.
          </li>
          
<li>
            Finally you can get the run-log of the test-run from the Daemon. Right now, all you can
            do is save it, but we will open the run-log API so that you will be able to integrate
            run-logs from various daemons and test-runs into a single run-log.
          </li>
        
</ul>
        
<p>
          For proper dependency management, including rollback of no longer required dependencies
          between 'Test-case' invocations, it is important to use the same
          <code>DaemonRunContext</code> for execution of each related 'Test-case'. The easiest way to
          achieve this is to use the shared <code>TestRunDaemon</code> and its shared
          <code>DaemonRunContext</code> each time you talk to a given <code>Daemon</code>.
        </p>
        
<p>
          The following sections provide a complete reference for the daemon API. Further
          explanations and examples are provided in <a href="user_execdaemon.html#usec_execdaemon">section 22.2</a>.
        </p>
        

        
<a name="sec_N186179"></a>
          
<h5 class="header-container h5">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_N186179">51.2.1</a></span>
</div>
<a href="contents.html#toc_sec_N186179">The <code class="classdef">DaemonLocator</code></a>
</h5>
          
<p>
            The singleton class <code>de.qfs.apps.qftest.daemon.DaemonLocator</code> can be used to
            get hold of <code>Daemon</code> instances.
          </p>
          
<table class="api" cellspacing="0">
<tr>
<td colspan="2" class="apibegin">&nbsp;</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="api">
<table width="100%" cellspacing="0">
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>static DaemonLocator instance()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the singleton instance.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">The singleton instance.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>Daemon locateDaemon(String host, int port)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get a Daemon from a specific host and port.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>host</code></strong></td><td class="paramdesc">
                The target host, name or IP string.
              </td>
</tr>
<tr>
<td class="paramname"><strong><code>port</code></strong></td><td class="paramdesc">
                The target port.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">The daemon or null if none can be found.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>Daemon[] locateDaemons(long timeout)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get all known daemons.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>timeout</code></strong></td><td class="paramdesc">
                The time in milliseconds to wait for daemons to react.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">The known daemons.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void setKeystore(String keystoreFile)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
              Sets the keystore, which should be used to to secure the daemon communication.
            </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>keystoreFile</code></strong></td><td class="paramdesc">
              The path to the keystore file used to encrypt the daemon communication.
            </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void setKeystorePassword(String password)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
              Sets the password for the keystore defined with <code>setKeystore</code>.
            </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>password</code></strong></td><td class="paramdesc">
              The password.
            </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void setTruststore(String truststoreFile)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
              Sets the truststore, which should be used to to secure the daemon communication.
              If not set, the keystore will be used, which has been set with <code>setKeystore</code>.
            </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>truststoreFile</code></strong></td><td class="paramdesc">
              The path to the truststore file used to encrypt the daemon communication.
            </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void setTruststorePassword(String password)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
              Sets the password for the trststore defined with <code>setTruststore</code>.
            </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>password</code></strong></td><td class="paramdesc">
              The password.
            </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="2" class="apiend">&nbsp;</td>
</tr>
</table>
        

        
        

        
<a name="sec_N186342"></a>
          
<h5 class="header-container h5">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_N186342">51.2.2</a></span>
</div>
<a href="contents.html#toc_sec_N186342">The <code class="classdef">Daemon</code></a>
</h5>
          
<p>
            The <code>de.qfs.apps.qftest.daemon.Daemon</code> interface is an envelope for various
            kinds of QF-Test daemons. Currently only the <code>TestRunDaemon</code> is available, but
            something like an <code>SUTClientStarterDaemon</code> is already planned and others may
            follow.
          </p>

          
<table class="api" cellspacing="0">
<tr>
<td colspan="2" class="apibegin">&nbsp;</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="api">
<table width="100%" cellspacing="0">
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void cleanup()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Clean up all TestRunDaemons belonging to this Daemon and then kill all clients. The
                default timeout of 30 seconds is used to wait for possible dependency rollback.
              </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void cleanup(long timeout)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Clean up all TestRunDaemons belonging to this Daemon and then kill all clients.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>timeout</code></strong></td><td class="paramdesc">
                The maximum time in milliseconds to wait for possible dependency rollback.
              </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>TestRunDaemon createTestRunDaemon()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get access to a TestRunDaemon.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                A TestRunDaemon.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>String getHost()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the host of the Daemon.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">The host of the Daemon.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>String getIp()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the ip of the Daemon.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The ip of the Daemon.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>int getPort()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the port of the Daemon.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The port of the Daemon.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>TestRunDaemon getSharedTestRunDaemon()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the shared TestRunDaemon.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The shared TestRunDaemon.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>TestRunDaemon[] getTestRunDaemons()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get all TestRunDaemons created by the Daemon that are still live.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The set of live TestRunDaemons created by the Daemon. Does not include the shared
                TestRunDaemon.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void killClients()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Kill all clients that belong to the VM of the daemon.
              </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void ping()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Test whether the Daemon is still alive.
              </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                 If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void terminate(int exitCode)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Terminate the daemon process by calling System.exit.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>exitCode</code></strong></td><td class="paramdesc">
                The exit code for the daemon.
              </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="2" class="apiend">&nbsp;</td>
</tr>
</table>

        

        
        

        
<a name="sec_N186584"></a>
          
<h5 class="header-container h5">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_N186584">51.2.3</a></span>
</div>
<a href="contents.html#toc_sec_N186584">The <code class="classdef">TestRunDaemon</code></a>
</h5>
          
<p>
            The <code>de.qfs.apps.qftest.daemon.TestRunDaemon</code> is the outer interface for test
            execution. It is used to define the environment for associated test-runs and create the
            <code>DaemonRunContext</code> instances that handle the actual test execution.
          </p>
          
<a name="sec_N186602"></a>
            
<h5 class="header-container h5">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_N186602">51.2.3.1</a></span>
</div>
<a href="contents.html#toc_sec_N186602">Miscellaneous</a>
</h5>
            
<table class="api" cellspacing="0">
<tr>
<td colspan="2" class="apibegin">&nbsp;</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="api">
<table width="100%" cellspacing="0">
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>Daemon getDaemon()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                  Get the Daemon to which the TestRunDaemon belongs.
                </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                  The Daemon of the TestRunDaemon.
                </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                  If something RMI specific goes wrong.
                </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="2" class="apiend">&nbsp;</td>
</tr>
</table>
          
          
<a name="sec_N186632"></a>
            
<h5 class="header-container h5">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_N186632">51.2.3.2</a></span>
</div>
<a href="contents.html#toc_sec_N186632">Global variable handling</a>
</h5>
	    
<p>
	      The TestRunDaemon has its own set of global variables which are used to initialize the globals when
	      creating a new DaemonRunContext. The following methods have no effect on already running
	      DaemonRunContext instances.
	    </p>
            
<table class="api" cellspacing="0">
<tr>
<td colspan="2" class="apibegin">&nbsp;</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="api">
<table width="100%" cellspacing="0">
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void clearGlobals()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                  Clear all global variables.
                </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                  If something RMI specific goes wrong.
                </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>String getGlobal(String name)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                  Get a global variable value.
                </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>name</code></strong></td><td class="paramdesc">
                  The name of the global variable.
                </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                  The value of the global variable or null if undefined.
                </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                  If something RMI specific goes wrong.
                </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>Properties getGlobals()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                  Get all global variable values.
                </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                  All global variable values.
                </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                  If something RMI specific goes wrong.
                </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void setGlobal(String name, String value)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                  Set a global variable value.
                </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>name</code></strong></td><td class="paramdesc">
                  The name of the global variable.
                </td>
</tr>
<tr>
<td class="paramname"><strong><code>value</code></strong></td><td class="paramdesc">
                  The value of the global variable.
                </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                  If something RMI specific goes wrong.
                </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="2" class="apiend">&nbsp;</td>
</tr>
</table>
          
          
<a name="sec_N186731"></a>
            
<h5 class="header-container h5">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_N186731">51.2.3.3</a></span>
</div>
<a href="contents.html#toc_sec_N186731">Test execution</a>
</h5>
            
<table class="api" cellspacing="0">
<tr>
<td colspan="2" class="apibegin">&nbsp;</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="api">
<table width="100%" cellspacing="0">
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void cleanup()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                  Clean up and release all contexts belonging to this TestRunDaemon. The default
                  timeout of 30 seconds is used to wait for possible dependency rollback.
                </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                  If something RMI specific goes wrong.
                </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void cleanup(long timeout)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                  Clean up and release all contexts belonging to this TestRunDaemon.
                </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>timeout</code></strong></td><td class="paramdesc">
                  The maximum time in milliseconds to wait for possible dependency rollback.
                </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                  If something RMI specific goes wrong.
                </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>DaemonRunContext createContext()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                  Create a single daemon run-context. Needs to acquire a license.
                </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                  The context or null if no license can be acquired.
                </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                  If something RMI specific goes wrong.
                </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>DaemonRunContext[] createContexts(int threads)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                  Create daemon run-contexts for multiple threads. Needs to acquire one license per thread.
                </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>threads</code></strong></td><td class="paramdesc">
                  The number of threads for the contexts.
                </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                  The contexts or null if not enough licenses can be acquired.
                </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                  If something RMI specific goes wrong.
                </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>DaemonRunContext[] getContexts()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                  Get all DaemonRunContexts created by the TestRunDaemon that are still live and
                  have not been released.
                </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                  The set of live DaemonRunContexts created by the TestRunDaemon. Does not include
                  the shared DaemonRunContext.
                </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                  If something RMI specific goes wrong.
                </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>DaemonRunContext getSharedContext()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                  Get the shared daemon run-context. Needs to acquire a license if the shared
                  context must be created first.
                </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                  The shared context or null if no license can be acquired.
                </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                  If something RMI specific goes wrong.
                </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void setRootDirectory(String directory)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                  Set the test-suite root directory for new created daemon run-contexts.
                </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>directory</code></strong></td><td class="paramdesc">
                  The new root directory.
                </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                  If something RMI specific goes wrong.
                </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="2" class="apiend">&nbsp;</td>
</tr>
</table>
          
          
<a name="sec_N186884"></a>
            
<h5 class="header-container h5">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_N186884">51.2.3.4</a></span>
</div>
<a href="contents.html#toc_sec_N186884">Identification</a>
</h5>
            
<table class="api" cellspacing="0">
<tr>
<td colspan="2" class="apibegin">&nbsp;</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="api">
<table width="100%" cellspacing="0">
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>String getIdentifier()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                  Get the identifier for the TestRunDaemon. If no identifier was previously set with
                  setIdentifier(), a default identifier is created from the name of the Daemon, to
                  which the TestRunDaemon belongs, and a counter.
                </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                  The identifier for the TestRunDaemon.
                </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                  If something RMI specific goes wrong.
                </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void setIdentifier(String identifier)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                  Set an identifier for the TestRunDaemon. This can be useful in identifying
                  a TestRunDaemon retrieved via Daemon.getTestRunDaemons().
                </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>identifier</code></strong></td><td class="paramdesc">
                  The identifier to set.
                </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                  If something RMI specific goes wrong.
                </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="2" class="apiend">&nbsp;</td>
</tr>
</table>
          
        

        
        

        
<a name="sec_N186940"></a>
          
<h5 class="header-container h5">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_N186940">51.2.4</a></span>
</div>
<a href="contents.html#toc_sec_N186940">The <code class="interfacedef">DaemonRunContext</code></a>
</h5>
          
<p>
            The <code>de.qfs.apps.qftest.daemon.DaemonRunContext</code> interface is in charge of
            the actual test execution.
          </p>
          
<p>
            The following run states are defined:
          </p>
          

          
<a name="table_51.1"></a><a name="table_51.1"></a>
<table class="table" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3">
<table class="tdleft" border="1" cellspacing="0" cellpadding="5">
              
<tr>
                
<th rowspan="1" colspan="1">State</th>
                <th rowspan="1" colspan="1">Value</th>
                <th rowspan="1" colspan="1">Description</th>
              
</tr>
              
<tr>
                
<td rowspan="1" colspan="1"><code>STATE_INVALID</code></td>
                <td align="right" rowspan="1" colspan="1"><code>-1</code></td>
                <td rowspan="1" colspan="1">Invalid after release - cannot be reactivated.</td>
              
</tr>
              
<tr>
                
<td rowspan="1" colspan="1"><code>STATE_IDLE</code></td>
                <td align="right" rowspan="1" colspan="1"><code>0</code></td>
                <td rowspan="1" colspan="1">No run scheduled.</td>
              
</tr>
              
<tr>
                
<td rowspan="1" colspan="1"><code>STATE_SCHEDULED</code></td>
                <td align="right" rowspan="1" colspan="1"><code>1</code></td>
                <td rowspan="1" colspan="1">Run scheduled but not started.</td>
              
</tr>
              
<tr>
                
<td rowspan="1" colspan="1"><code>STATE_RUNNING</code></td>
                <td align="right" rowspan="1" colspan="1"><code>2</code></td>
                <td rowspan="1" colspan="1">Running.</td>
              
</tr>
              
<tr>
                
<td rowspan="1" colspan="1"><code>STATE_PAUSED</code></td>
                <td align="right" rowspan="1" colspan="1"><code>3</code></td>
                <td rowspan="1" colspan="1">Running but paused.</td>
              
</tr>
              
<tr>
                
<td rowspan="1" colspan="1"><code>STATE_FINISHED</code></td>
                <td align="right" rowspan="1" colspan="1"><code>4</code></td>
                <td rowspan="1" colspan="1">Run finished, result and run-log available.</td>
              
</tr>
            
</table>
</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption"><a href="tables.html#list-of-tables">Table&nbsp;51.1</a>:&nbsp;&nbsp;The run state</td><td class="captionglue"></td>
</tr>
</table>

          
          
<p>
	    
<span class="margin"><a name="new_N187122"></a><span class="note">6.0+</span></span>
	    The following result codes for the <code>getResult()</code> method are the same as everywhere in QF-Test:
          </p>
          

          
<a name="table_51.2"></a><a name="table_51.2"></a>
<table class="table" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3">
<table class="tdleft" border="1" cellspacing="0" cellpadding="5">
              
<tr>
                
<th rowspan="1" colspan="1">Result</th>
                <th rowspan="1" colspan="1">Value</th>
                <th rowspan="1" colspan="1">Description</th>
              
</tr>
              
<tr>
                
<td rowspan="1" colspan="1"><code>RESULT_OK</code></td>
                <td align="right" rowspan="1" colspan="1"><code>0</code></td>
                <td rowspan="1" colspan="1">Run OK, no warnings, errors or exceptions.</td>
              
</tr>
              
<tr>
                
<td rowspan="1" colspan="1"><code>RESULT_WARNING</code></td>
                <td align="right" rowspan="1" colspan="1"><code>1</code></td>
                <td rowspan="1" colspan="1">Run mostly OK, some warnings but no errors or exceptions.</td>
              
</tr>
              
<tr>
                
<td rowspan="1" colspan="1"><code>RESULT_ERROR</code></td>
                <td align="right" rowspan="1" colspan="1"><code>2</code></td>
                <td rowspan="1" colspan="1">Run failed with errors but no exceptions.</td>
              
</tr>
              
<tr>
                
<td rowspan="1" colspan="1"><code>RESULT_EXCEPTION</code></td>
                <td align="right" rowspan="1" colspan="1"><code>3</code></td>
                <td rowspan="1" colspan="1">Run failed with an exception.</td>
              
</tr>
            
</table>
</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption"><a href="tables.html#list-of-tables">Table&nbsp;51.2</a>:&nbsp;&nbsp;The result codes</td><td class="captionglue"></td>
</tr>
</table>

          

          
<table class="api" cellspacing="0">
<tr>
<td colspan="2" class="apibegin">&nbsp;</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="api">
<table width="100%" cellspacing="0">
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void addTestRunListener(DaemonTestRunListener listener, boolean synchronous, long timeout)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">Add a DaemonTestRunListener to the DaemonRunContext.</td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>listener</code></strong></td><td class="paramdesc">The listener to add.</td>
</tr>
<tr>
<td class="paramname"><strong><code>synchronous</code></strong></td><td class="paramdesc">
                Whether the listener should get notified synchronously, in which case the test-run
                will be blocked while the listener is processing the event.
              </td>
</tr>
<tr>
<td class="paramname"><strong><code>timeout</code></strong></td><td class="paramdesc">
                Timeout in milliseconds for callbacks to the listener. If the listener does not
                reply within that time the listener is automatically unregistered to prevent further
                problems. In case of a synchronous listener the test-run will then continue. A value
                of 0 means no timeout which is dangerous but may be useful.
              </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>boolean callProcedure(String procedure, Properties bindings=None)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Call a procedure in the run-context.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>procedure</code></strong></td><td class="paramdesc">
                The procedure to run, of the form <code>Suite#Procedure</code> where
                <code>Procedure</code> is the fully qualified name of the 'Procedure'.
              </td>
</tr>
<tr>
<td class="paramname"><strong><code>bindings</code></strong></td><td class="paramdesc">
                An optional set of variable bindings. These variables have higher precedence than
                the globals or any bindings on the fallback stack.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                True if the procedure call was started, false if suite or procedure could not be
                found.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td class="throwname"><strong><code>IllegalStateException</code></strong></td><td class="throwdesc">
                If no run can be started in the current state, i.e. if the state is neither
                STATE_IDLE nor STATE_FINISHED.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void clearGlobals()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Clear all global variables of the DaemonRunContext.
              </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void clearTestRunListeners()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">Remove all DaemonTestRunListeners from the DaemonRunContext.</td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>String getGlobal(String name)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Retrieve the value of a global variable from the DaemonRunContext.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>name</code></strong></td><td class="paramdesc">The name of the variable.</td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The value of the variable or null if undefined.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>Properties getGlobals()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Retrieve all global variables from the DaemonRunContext.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The global variables.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>String getIdentifier()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the identifier for the DaemonRunContext. If no identifier was previously set
                with setIdentifier(), a default identifier is created from the name of the
                TestRunDaemon, to which the DaemonRunContext belongs, and a counter.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The identifier for the DaemonRunContext.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>String getLastTest()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the name of the test that is currently running or was last run on this
                DaemonRunContext.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The name of the currently running or most recently executed test.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>int getNumThreads()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the number of threads in the group to which the DaemonRunContext belongs.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The number of threads of the DaemonRunContext's group.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>Properties getProperties(String group)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Retrieve all properties from a property or resource group from the DaemonRunContext.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>name</code></strong></td><td class="paramdesc">The name of the property or resource group.</td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The properties or null if no such group exists.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>String getProperty(String group, String name)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Retrieve the value of a property or resource from the DaemonRunContext.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>name</code></strong></td><td class="paramdesc">The name of the property or resource group.</td>
</tr>
<tr>
<td class="paramname"><strong><code>name</code></strong></td><td class="paramdesc">The name of the property.</td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The value of the property or null if undefined.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>int getResult()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the result of the test run.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The result of the run, one of RESULT_OK, RESULT_WARNING, RESULT_ERROR or RESULT_EXCEPTION.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td class="throwname"><strong><code>IllegalStateException</code></strong></td><td class="throwdesc">
                If the state isn't STATE_FINISHED.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>byte[] getRunLog()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the run-log of the test run.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The run-log dumped into a byte array.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td class="throwname"><strong><code>IllegalStateException</code></strong></td><td class="throwdesc">
                If the state isn't STATE_FINISHED.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>int getRunState()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the current run state of the context.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The current run state, one of STATE_IDLE, STATE_SCHEDULED, STATE_RUNNING, STATE_PAUSED or
		STATE_FINISHED.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>TestRunDaemon getTestRunDaemon()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the TestRunDaemon to which the DaemonRunContext belongs.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The TestRunDaemon of the DaemonRunContext.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>int getThreadNum()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the thread index of the DaemonRunContext.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code></code></strong></td><td class="paramdesc">
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The thread index of the DaemonRunContext.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void release()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Release the DaemonRunContext and return its license. If a test is running, stop it.
              </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td class="throwname"><strong><code>IllegalStateException</code></strong></td><td class="throwdesc">
                If no DaemonRunContext was allocated.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void removeTestRunListener(DaemonTestRunListener listener)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">Remove a DaemonTestRunListener from the DaemonRunContext.</td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>listener</code></strong></td><td class="paramdesc">The listener to remove.</td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void rollbackDependencies()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">Roll back the dependencies for this DaemonRunContext.</td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td class="throwname"><strong><code>IllegalStateException</code></strong></td><td class="throwdesc">
                If no run can be started in the current state, i.e. if the state is neither
                STATE_IDLE nor STATE_FINISHED.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>boolean runTest(String test, Properties bindings=None)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Run a test in the run-context.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>test</code></strong></td><td class="paramdesc">
                The test to run, of the form <code>Suite#Test</code> where <code>#Test</code> is
                optional and <code>Test</code> is the fully qualified name of a 'Test-set' or
                'Test-case' or just ".". The latter is equivalent to specifying just
                <code>Suite</code> and causes the whole test-suite to be executed.
                Examples: <br>
                
<table class="tdleft" border="0" cellspacing="0" cellpadding="0" texwidth="\linewidth" valign="center">
                  
<tr>
                    
<td rowspan="1" colspan="1"><code>MySuite</code></td>
                    <td rowspan="1" colspan="1">&nbsp;&nbsp;&nbsp;</td>
                    <td rowspan="1" colspan="1">Runs whole test-suite <code>MySuite</code>.</td>
                  
</tr>
                  
<tr>
                    
<td rowspan="1" colspan="1"><code>MySuite#.</code></td>
                    <td rowspan="1" colspan="1">&nbsp;&nbsp;&nbsp;</td>
                    <td rowspan="1" colspan="1">Runs whole test-suite <code>MySuite</code>.</td>
                  
</tr>
                  
<tr>
                    
<td rowspan="1" colspan="1"><code>MySuite#MyTestSet</code></td>
                    <td rowspan="1" colspan="1">&nbsp;&nbsp;&nbsp;</td>
                    <td rowspan="1" colspan="1">Runs test-set <code>MyTestSet</code> in test-suite <code>MySuite</code>.</td>
                  
</tr>
                  
<tr>
                    
<td rowspan="1" colspan="1"><code>MySuite#MyTestSet.MyTestCase</code></td>
                    <td rowspan="1" colspan="1">&nbsp;&nbsp;&nbsp;</td>
                    <td rowspan="1" colspan="1">Runs test-case <code>MyTestCase</code> located in test-set
                      <code>MyTestSet</code> in test-suite <code>MySuite</code>.</td>
                  
</tr>
                
</table>
              
</td>
</tr>
<tr>
<td class="paramname"><strong><code>bindings</code></strong></td><td class="paramdesc">
                An optional set of variable bindings. These variables have higher precedence than
                the globals or any bindings on the fallback stack.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                True if the test was started, false if suite or test could not be found.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td class="throwname"><strong><code>IllegalStateException</code></strong></td><td class="throwdesc">
                If no run can be started in the current state, i.e. if the state is neither
                STATE_IDLE nor STATE_FINISHED.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void setGlobals(Properties globals)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Set the global variables of the DaemonRunContext.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>globals</code></strong></td><td class="paramdesc">
                The global variables to set.
              </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void setIdentifier(String identifier)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Set an identifier for the DaemonRunContext. This can be useful in identifying
                a DaemonRunContext retrieved via TestRunDaemon.getContexts().
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>identifier</code></strong></td><td class="paramdesc">
                The identifier to set.
              </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void setRootDirectory(String directory)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Set the test-suite root directory for the next test-run.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>directory</code></strong></td><td class="paramdesc">
                The new root directory.
              </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>void stopRun()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Stop the test-run.
              </td>
</tr>
<tr></tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td class="throwname"><strong><code>IllegalStateException</code></strong></td><td class="throwdesc">
                If no run was scheduled.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>boolean waitForRunState(int state, long timeout)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Wait for the context to reach a given state.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>state</code></strong></td><td class="paramdesc">
                The state to wait for.
              </td>
</tr>
<tr>
<td class="paramname"><strong><code>timeout</code></strong></td><td class="paramdesc">
                Maximum time in milliseconds to wait.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                True if the state was reached, false if timed out.
              </td>
</tr>
<tr>
<td colspan="2" class="throws"><strong>Throws</strong></td>
</tr>
<tr>
<td class="throwname"><strong><code>RemoteException</code></strong></td><td class="throwdesc">
                If something RMI specific goes wrong.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="2" class="apiend">&nbsp;</td>
</tr>
</table>
        

        
        

        
<a name="sec_daemontestrunlistener"></a>
          
<h5 class="header-container h5">
<div>
<span class="margin"><a name="new_N187955"></a><span class="note">3.1+</span></span><span class="numtitle"><a href="contents.html#toc_sec_daemontestrunlistener">51.2.5</a></span>
</div>
<a href="contents.html#toc_sec_daemontestrunlistener">The <code>DaemonTestRunListener</code></a>
</h5>
          
<p>
            The <code>de.qfs.apps.qftest.daemon.DaemonTestRunListener</code> interface is identical
            to the interface <code>de.qfs.apps.qftest.extensions.qftest.TestRunListener</code>
            described in <a href="tech_testrunlisteners.html#sec_testrunlisteners">section 50.7</a>, except that its methods can throw a
            <code>RemoteException</code> on RMI failure. When implementing this interface you must
            derive your class from <code>java.rmi.server.UnicastRemoteObject</code>.
          </p>
          
<p>
            You can register the listener with a <code>DaemonRunContext</code> via its
            <code>addTestRunListener</code> method described in the previous section.
          </p>
        

        
      
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="navifooter">
<tr>
<td class="margin"></td><td class="navicon"><a href="manual.html"><img src="../icons/linktop.png" width="34" height="36" border="0" alt="Top" title="Top"></a></td><td class="navicon"><a href="contents.html#table-of-contents"><img src="../icons/linktoc.png" width="34" height="36" border="0" alt="Table of contents" title="Table of contents"></a></td><td class="navicon"><a href="tech_daemon_concepts.html#sec_N185963"><img src="../icons/linkprev.png" width="34" height="36" border="0" alt="Previous Chapter: 51.1&nbsp;Daemon concepts" title="Previous Chapter: 51.1&nbsp;Daemon concepts"></a></td><td class="navicon"><a href="tech_daemon_security.html#sec_daemon_security"><img src="../icons/linkcont.png" width="34" height="36" border="0" alt="Next Page: 51.3&nbsp;Daemon security considerations" title="Next Page: 51.3&nbsp;Daemon security considerations"></a></td><td class="navicon"><a href="tech_daemon_security.html#sec_daemon_security"><img src="../icons/linknext.png" width="34" height="36" border="0" alt="Next Chapter: 51.3&nbsp;Daemon security considerations" title="Next Chapter: 51.3&nbsp;Daemon security considerations"></a></td><td class="navicon"><a href="tech_daemon.html#sec_daemon"><img src="../icons/linkup.png" width="34" height="36" border="0" alt="Chapter Overview: 51&nbsp;Daemon mode" title="Chapter Overview: 51&nbsp;Daemon mode"></a></td><td class="navicon"><a href="../../manual_en.pdf" target="_parent"><img src="../icons/linkpdf.png" width="34" height="36" border="0" alt="PDF version" title="PDF version"></a></td><td class="navcopymod">Last update: 9/6/2022<br>Copyright &copy; 1999-2022 Quality First Software GmbH</td>
</tr>
</table>
</body>
</html>
