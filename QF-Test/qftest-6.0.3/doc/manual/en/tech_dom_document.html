<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="version" content="6.0.3">
<link rel="shortcut icon" href="../icons/favicon.ico" type="image/vnd.microsoft.icon">
<title>The DocumentNode class</title>
<link href="man.css" type="text/css" rel="stylesheet">
<meta name="organisation" content="Quality First Software GmbH">
<meta name="copyright" content="(C) 1999-2022 Quality First Software GmbH">
</head>
<body bgcolor="white">
<a name="sec_dom_documentnode"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="naviheader">
<tr>
<td class="margin"></td><td class="navicon"><a href="manual.html"><img src="../icons/linktop.png" width="34" height="36" border="0" alt="Top" title="Top"></a></td><td class="navicon"><a href="contents.html#table-of-contents"><img src="../icons/linktoc.png" width="34" height="36" border="0" alt="Table of contents" title="Table of contents"></a></td><td class="navicon"><a href="tech_dom_node.html#sec_dom_Node"><img src="../icons/linkprev.png" width="34" height="36" border="0" alt="Previous Chapter: 50.11.1&nbsp;The abstract Node class" title="Previous Chapter: 50.11.1&nbsp;The abstract Node class"></a></td><td class="navicon"><a href="tech_dom_frame.html#sec_dom_framenode"><img src="../icons/linkcont.png" width="34" height="36" border="0" alt="Next Page: 50.11.3&nbsp;The FrameNode class" title="Next Page: 50.11.3&nbsp;The FrameNode class"></a></td><td class="navicon"><a href="tech_dom_frame.html#sec_dom_framenode"><img src="../icons/linknext.png" width="34" height="36" border="0" alt="Next Chapter: 50.11.3&nbsp;The FrameNode class" title="Next Chapter: 50.11.3&nbsp;The FrameNode class"></a></td><td class="navicon"><a href="tech_domapi.html#sec_domapi"><img src="../icons/linkup.png" width="34" height="36" border="0" alt="Chapter Overview: 50.11&nbsp;Pseudo DOM API" title="Chapter Overview: 50.11&nbsp;Pseudo DOM API"></a></td><td class="navicon"><a href="../../manual_en.pdf" target="_parent"><img src="../icons/linkpdf.png" width="34" height="36" border="0" alt="PDF version" title="PDF version"></a></td><td class="homeicon"><a href="http://www.qfs.de/en/qftest/index.html" target="_parent"><img src="../icons/qftest.png" width="127" height="42" border="0" alt="QF-Test" title="QF-Test"></a></td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="naviversion">
<tr>
<td>Version 6.0.3</td>
</tr>
</table>
          
<h5 class="header-container h5">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_dom_documentnode">50.11.2</a></span>
</div>
<a href="contents.html#toc_sec_dom_documentnode">The <code class="classdef">DocumentNode</code> class</a>
</h5>
          
<p>
            
<span class="margin"><a name="web_N184167"></a><span class="note">Web</span></span> The root <code>document</code> of a web page is not represented by a
            'Window' node, but the special node <a href="components.html#step_WebPageStep" shape="rect">'Web page'</a>.
            Nested <code>document</code> nodes in <code>frames</code> correspond to
            'Components' nodes.
          </p>
          
<p>
            The <code>DocumentNode</code> class is derived from <code>Node</code> and also resides
            in the package <code>de.qfs.apps.qftest.client.web.dom</code>. In addition to the
            methods defined in the <code>Node</code> class and explained above,
            <code>DocumentNode</code> provides the following:
          </p>
          
<table class="api" cellspacing="0">
<tr>
<td colspan="2" class="apibegin">&nbsp;</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="api">
<table width="100%" cellspacing="0">
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>Object evalJS(String script)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Evaluate some JavaScript code in the context of this document.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>script</code></strong></td><td class="paramdesc">The script to execute.</td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">Whatever the script returns, converted to the proper object type. Even
                returning a DOM node, frame or document works.</td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>FrameNode[] getFrames()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the child frames of the document.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The child frames of the document, an empty array in case there are none.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>DomNode getRootElement()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the &lt;HTML&gt; root element of the document.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">The root element of the document.</td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>String getSourcecode()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the HTML source code of the document in its current state, which is not
                necessarily the same as what was loaded when the document was opened because
                attributes or the DOM's structure may have been changes since, e.g. via JavaScript.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The current HTML code of the document.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>String getTitle()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the title of the document as defined in the &lt;TITLE&gt; of the &lt;HEAD&gt; of
                its root element.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">The title of the document.</td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>String getUrl()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the URL of the document.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">The URL of the document.</td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>boolean hasParent()</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                To test whether a document is a top-level document this method should be used
                instead of testing whether the result of <code>getParent()</code> is null. The
                reason is that loading of nested child documents may be completed before loading of
                the main document. During this time it is known that the nested document will have a
                parent, but the parent is not available yet.
              </td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                True if the document has a parent, false if it is a top-level document.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="2" class="apiend">&nbsp;</td>
</tr>
</table>
          
<p>
            In addition to the instance methods describe above, the <code>DocumentNode</code> class
            provides some static convenience methods for manipulating URLs.
          </p>
          
<table class="api" cellspacing="0">
<tr>
<td colspan="2" class="apibegin">&nbsp;</td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="api">
<table width="100%" cellspacing="0">
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>static String getUrlBase(String url)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the base part of an URL, including host and directory but excluding possible
                parameters separated by '?' and excluding a possible Tomcat session ID.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>url</code></strong></td><td class="paramdesc">The URL to get the base part of.</td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">The base part of the URL.</td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>static String getUrlHost(String url)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the host part of an URL, i.e. the part between "http(s)://" and the next '/'.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>url</code></strong></td><td class="paramdesc">The URL to get the host part of.</td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The host part of the URL or null if the protocol is neither http nor https.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>static ExtraFeatureSet getUrlParameters(String url)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Get the parameters of an URL, including those separated by '?' and a possible Tomcat
                session ID, in the form of an <code>ExtraFeatureSet</code> that can be used for an
                <code>ExtraFeatureResolver</code> as described in <a href="tech_resolversmodule.html#sec_extrafeatureresolver">subsection 50.1.10</a>.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>url</code></strong></td><td class="paramdesc">The URL to get the parameters for.</td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The parameters of the URL.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="methoddef"><strong><code>static String normalizeUrl(String url)</code></strong></td>
</tr>
<tr>
<td colspan="2" class="comment">
                Normalize an URL by replacing '\' with '/', "file:/(/(/))" with "file:///", up-casing
                windows drive letters and decoding %.. sequences.
              </td>
</tr>
<tr>
<td colspan="2" class="params"><strong>Parameters</strong></td>
</tr>
<tr>
<td class="paramname"><strong><code>url</code></strong></td><td class="paramdesc">The URL to normalize.</td>
</tr>
<tr>
<td class="return"><strong>Returns</strong></td><td class="returndesc">
                The normalized URL.
              </td>
</tr>
<tr>
<td colspan="2" class="methodsep">&nbsp;</td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="2" class="apiend">&nbsp;</td>
</tr>
</table>
        
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="navifooter">
<tr>
<td class="margin"></td><td class="navicon"><a href="manual.html"><img src="../icons/linktop.png" width="34" height="36" border="0" alt="Top" title="Top"></a></td><td class="navicon"><a href="contents.html#table-of-contents"><img src="../icons/linktoc.png" width="34" height="36" border="0" alt="Table of contents" title="Table of contents"></a></td><td class="navicon"><a href="tech_dom_node.html#sec_dom_Node"><img src="../icons/linkprev.png" width="34" height="36" border="0" alt="Previous Chapter: 50.11.1&nbsp;The abstract Node class" title="Previous Chapter: 50.11.1&nbsp;The abstract Node class"></a></td><td class="navicon"><a href="tech_dom_frame.html#sec_dom_framenode"><img src="../icons/linkcont.png" width="34" height="36" border="0" alt="Next Page: 50.11.3&nbsp;The FrameNode class" title="Next Page: 50.11.3&nbsp;The FrameNode class"></a></td><td class="navicon"><a href="tech_dom_frame.html#sec_dom_framenode"><img src="../icons/linknext.png" width="34" height="36" border="0" alt="Next Chapter: 50.11.3&nbsp;The FrameNode class" title="Next Chapter: 50.11.3&nbsp;The FrameNode class"></a></td><td class="navicon"><a href="tech_domapi.html#sec_domapi"><img src="../icons/linkup.png" width="34" height="36" border="0" alt="Chapter Overview: 50.11&nbsp;Pseudo DOM API" title="Chapter Overview: 50.11&nbsp;Pseudo DOM API"></a></td><td class="navicon"><a href="../../manual_en.pdf" target="_parent"><img src="../icons/linkpdf.png" width="34" height="36" border="0" alt="PDF version" title="PDF version"></a></td><td class="navcopymod">Last update: 9/6/2022<br>Copyright &copy; 1999-2022 Quality First Software GmbH</td>
</tr>
</table>
</body>
</html>
