<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="version" content="6.0.3">
<link rel="shortcut icon" href="../icons/favicon.ico" type="image/vnd.microsoft.icon">
<title>Loops</title>
<link href="man.css" type="text/css" rel="stylesheet">
<meta name="organisation" content="Quality First Software GmbH">
<meta name="copyright" content="(C) 2002-2022 Quality First Software GmbH">
</head>
<body bgcolor="white">
<a name="sec_loopswin"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="naviheader">
<tr>
<td class="margin"></td><td class="navicon"><a href="tutorial.html"><img src="../icons/linktop.png" width="34" height="36" border="0" alt="Top" title="Top"></a></td><td class="navicon"><a href="contents.html#table-of-contents"><img src="../icons/linktoc.png" width="34" height="36" border="0" alt="Table of contents" title="Table of contents"></a></td><td class="navicon"><a href="ifelsewin.html#sec_ifwin"><img src="../icons/linkprev.png" width="34" height="36" border="0" alt="Previous Chapter: 26.1&nbsp;If - else" title="Previous Chapter: 26.1&nbsp;If - else"></a></td><td class="navicon"><a href="ownappwin.html#sec_ownappwin"><img src="../icons/linkcont.png" width="34" height="36" border="0" alt="Next Page: 27&nbsp;It's time to start your own Application (Win)" title="Next Page: 27&nbsp;It's time to start your own Application (Win)"></a></td><td class="navicon"><img src="../icons/linknextdis.png" width="34" height="36" alt="" border="0"></td><td class="navicon"><a href="controlswin.html#sec_controlstructureswin"><img src="../icons/linkup.png" width="34" height="36" border="0" alt="Chapter Overview: 26&nbsp;Control structures (Win)" title="Chapter Overview: 26&nbsp;Control structures (Win)"></a></td><td class="navicon"><a href="../../tutorial_en.pdf" target="_parent"><img src="../icons/linkpdf.png" width="34" height="36" border="0" alt="PDF version" title="PDF version"></a></td><td class="homeicon"><a href="http://www.qfs.de/en/qftest/index.html" target="_parent"><img src="../icons/qftest.png" width="127" height="42" border="0" alt="QF-Test" title="QF-Test"></a></td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="naviversion">
<tr>
<td>Version 6.0.3</td>
</tr>
</table>
      
<h4 class="header-container h4">
<div>
<span class="numtitle"><a href="contents.html#toc_sec_loopswin">26.2</a></span>
</div>
<a href="contents.html#toc_sec_loopswin">Loops</a>
</h4>
      
<p>
        QF-Test provides two different kinds of nodes loops:
      </p>
      
<ul>
        
<li>
          'Loop' nodes execute their child nodes for a certain number of times. However, you can
          leave the loop any time using a 'Break' node.
        </li>
        
<li>
          'While' nodes execute their child nodes until a certain condition becomes
          false. Again, you can leave it any time using a 'Break' node.
        </li>
      
</ul>
      
<p>
<span class="margin"><span class="note">Note</span></span>
        'Loop' nodes will always stop after the given number of times.
        In the case of 'While' nodes, however, you need to make sure that the condition
        will become false at some point. Otherwise you would have an infinite loop. In
        interactive mode you can always stop execution by hitting the pause button
        <img src="images/pause_continue.png" style="vertical-align: text-bottom" alt="Continue" title="Continue" width="26" height="26" texscale=".5">.
        In batch mode you would have to kill the QF-Test process. (You start QF-Test in batch mode
        using the command line parameter <code>-batch</code>. Then QF-Test does not start its UI
        and just executes the given test-suite.)
      </p>
      
<p>
        In the following exercise we want to implement a test-case checking
        whether a certain row is displayed in the table of the CarConfig
        application.
      </p>
      
<p>
        The actions of the test-case will be:
      </p>
      
<ul>
        
<li>
          Determine the number of rows the table has.
        </li>
        
<li>
          Loop over all rows and check if it is the row we are looking for.
        </li>
        
<li>
          Break the loop when a match was found.
        </li>
        
<li>
          Write an error to the run-log if the row was not found.
        </li>
      
</ul>
      
<p>
        Please start with recording a check on the row of interest:
      </p>
      
<ul>
        
<li>
<span class="margin"><span class="note">Action</span></span>
          <strong>Activate the check recording mode</strong> by clicking the toolbar button
          <img src="images/check.png" style="vertical-align: text-bottom" alt="Record a check" title="Record a check" width="26" height="26" texscale=".5">
        </li>
        
<li>
          
<strong>Right-click a row</strong> in the CarConfig application and select the
          menu item &raquo;<em>Row</em>&laquo; from the popup menu.
        </li>
        
<li>
          
<strong>Stop the recording</strong> by pressing
          <img src="images/stop.png" style="vertical-align: text-bottom" alt="Stop" title="Stop" width="26" height="26" texscale=".5">.
        </li>
        
<li>
          
<strong>Change the name of the recorded sequence</strong> to e.g. 'Check row'
        </li>
        
<li>
          
<strong>Turn the recorded sequence into a test-case</strong> by right-clicking it
          and selecting the submenu item &raquo;<em>Transform node into</em>&laquo;-&raquo;<em>Test-case</em>&laquo; from the popup menu.
        </li>
      
</ul>
      
<a name="fig_ControlsTransformNodeIntoWin"></a><a name="figure_26.4"></a>
<table class="figure" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3"><a href="images/ControlsTransformNodeIntoWin.png" target="_blank"><img texscale=".66" src="images/ControlsTransformNodeIntoWin.png" width="886" height="723"></a></td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption"><a href="figures.html#list-of-figures">Figure&nbsp;26.4</a>:&nbsp;&nbsp;Transform a node into another one</td><td class="captionglue"></td>
</tr>
</table>
      
<p>
        In general, QF-Test lets you add nodes very efficiently by packing one node into another one:
      </p>
      
<ul>
        
<li>
<span class="margin"><span class="note">Action</span></span>
          Open the test-case node and <strong>pack the recorded 'Check' node into a loop</strong> by right-clicking it
          and selecting the submenu item &raquo;<em>Pack nodes</em>&laquo;-&raquo;<em>Loop</em>&laquo; from the popup menu.
        </li>
      
</ul>
      
<a name="fig_ControlsPackNodeIntoWin"></a><a name="figure_26.5"></a>
<table class="figure" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3"><a href="images/ControlsPackNodeIntoWin.png" target="_blank"><img texscale=".66" src="images/ControlsPackNodeIntoWin.png" width="886" height="723"></a></td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption"><a href="figures.html#list-of-figures">Figure&nbsp;26.5</a>:&nbsp;&nbsp;Pack a node into another one</td><td class="captionglue"></td>
</tr>
</table>
      
<p>
        QF-Test evaluates dynamically which nodes may be packed into one another
        and only presents the appropriate ones. So, in case you do not find the
        'Loop' submenu item make sure you have right-clicked the correct node.
        The same holds true for the 'Transform node into' and 'Insert node' methods.
      </p>
      
<p>
        In the next series of actions we want to set the value for the 'Number of iterations'
        attribute of the 'Loop' node. In order to do so we need to find
        out how many rows the table has. There is no simple node that you could use.
        However, in the last chapter we learned that the standard library provides
        a lot of extended functionality. So let's insert the procedure <code>getRowCount</code>
        from the package <code>qfs.win.table</code> in the standard library.
      </p>
      
<ul>
        
<li>
<span class="margin"><span class="note">Action</span></span>
          <strong>Select the 'Test-case' node and press [Ctrl-A]</strong>
        
</li>
        
<li>
          
<strong>Press the 'Select procedure' button <img src="images/procedure_select.png" style="vertical-align: text-bottom" alt="Procedure selection" title="Select procedure" width="20" height="20" texscale=".5"></strong>
          left to 'Procedure name'.
        </li>
        
<li>
          
<strong>Click the tab 'qfs.qft'</strong> in the 'Select procedure' dialog.
        </li>
        
<li>
          
<strong>Navigate to 'getRowCount' in the package 'qfs.win.table'</strong>
        
</li>
        
<li>
          
<strong>Click 'OK'</strong> to select it.
        </li>
        
<li>
          
<strong>Click 'OK'</strong> in the 'Procedure call' dialog.
        </li>
      
</ul>
      
<p>
        Adding a procedure via [Ctrl-A] was
        described in <a href="procmanualwin.html#tut_procmanualwin">Manual creation of procedures</a>. If you would like to check
        with the screenshots please have a look there.
      </p>
      
<ul>
        
<li>
<span class="margin"><span class="note">Action</span></span>
          <strong>Enter the variable name <code>rows</code> in
          the 'Variable for return value' attribute</strong>.
        </li>
        
<li>
          
<strong>Change the default value for the <code>id</code></strong> in the
          variable definitions table to the QF-Test component ID of the table, i.e.
          <strong><code>VehicleTable</code></strong>.
        </li>
        
<li>
          Click the <strong>OK</strong> button.
        </li>
        
<li>
          
<strong>Select the Loop</strong> node.
        </li>
        
<li>
          
<strong>Enter a reference to the variable <code>$(rows)</code> in
          the 'Number of iterations' attribute of the 'Loop' node</strong>.
        </li>
        
<li>
          
<strong>Enter the name of an iteration counter</strong>, e.g. <code>i</code>
          in the respective attribute of the 'Loop' node.
        </li>
        
<li>
          Click the <strong>OK</strong> button.
        </li>
      
</ul>
      
<a name="fig_ControlsLoopDetailsWin"></a><a name="figure_26.6"></a>
<table class="figure" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3"><a href="images/ControlsLoopDetails.png" target="_blank"><img texscale=".66" src="images/ControlsLoopDetails.png" width="393" height="413"></a></td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption"><a href="figures.html#list-of-figures">Figure&nbsp;26.6</a>:&nbsp;&nbsp;Details of a 'Loop' node</td><td class="captionglue"></td>
</tr>
</table>
      
<p>
        In the next series of actions we will change the recorded row index to the
        iteration counter and add a variable for the result to the details of the
        'Check' node. Then we will add an 'If' node after the
        'Check' node evaluating the result, with a 'Break' node within
        to quit the loop when the row was found.
      </p>
      
<ul>
        
<li>
<span class="margin"><span class="note">Action</span></span>
          <strong>Open the 'Loop' node</strong>.
        </li>
        
<li>
          
<strong>Select the 'Check' node</strong>.
        </li>
        
<li>
          
<strong>Change the recorded row index</strong> of the QF-Test component ID to the iteration counter
          <code>$(i)</code>. The QF-Test component ID should now read <code>VehicleTable@Model&amp;$(i)</code>
        
</li>
        
<li>
          
<strong>Enter the variable name <code>checkSucceeded</code> in the 'Variable for result' attribute</strong>
          and click the <strong>OK</strong> button.
        </li>
        
<li>
          
<strong>Right-click the 'Check' node</strong> and the submenu item
          &raquo;<em>Insert node </em>&laquo;-&raquo;<em>Control structures</em>&laquo;-&raquo;<em>Break</em>&laquo; from the popup menu.
        </li>
        
<li>
          
<strong>Click 'OK'</strong> in the 'Break' dialog.
        </li>
        
<li>
          
<strong>Pack the 'Break' node into an 'If' node</strong> by pressing
          [Ctrl-Shift-I] (Of course you can also
          pack it via the menu).
        </li>
        
<li>
          
<strong>Type <code>$(checkSucceeded)</code> in the 'Condition' attribute</strong>
          of the 'If' node and click the <strong>OK</strong> button.
        </li>
      
</ul>
      
<p>
        The variable <code>checkSucceeded</code> will be set to either <code>true</code> or <code>false</code> by the
        'Check' node so that the reference to the variable <code>$(checkSucceeded)</code>
        is all we need to enter in the
        'Condition' attribute of the 'If' node.
      </p>
      
<p>
        In the next series of actions let's add an 'Else' node as the last node
        in the 'Loop' node. It will only be entered if all repetitions of the loop
        were executed, which in our case means that the row was not found and the
        check never became true.
      </p>
      
<ul>
        
<li>
<span class="margin"><span class="note">Action</span></span>
          <strong>Collapse the 'If' node</strong> if it is open. This is important because
          otherwise the 'Else' node would belong to the 'If' node and
          not to the 'Loop' node.
        </li>
        
<li>
          
<strong>Right-click the 'If' node and select the submenu item
          &raquo;<em>Insert node </em>&laquo;-&raquo;<em>Control structures</em>&laquo;-&raquo;<em>Else</em>&laquo;</strong>.
        </li>
        
<li>
          
<strong>Click 'OK'</strong> in the 'Else' dialog.
        </li>
        
<li>
          
<strong>Open the 'Else' node</strong>.
        </li>
        
<li>
          
<strong>From the standard library insert the procedure <code>logError</code> contained in the
          package <code>qfs.run-log</code></strong> as described above.
        </li>
        
<li>
          
<strong>Type <code>Row not found</code> in the value field of <code>message</code> in the
          'Variable definitions' table.</strong>
        
</li>
        
<li>
          
<strong> Change the value of <code>withScreenshots</code></strong> in the
          'Variable definitions' table from <code>false</code> <strong>to <code>true</code>.</strong>
        
</li>
        
<li>
          
<strong>Click 'OK'</strong> in the 'Break' dialog.
        </li>
      
</ul>
      
<p>
        When you run tests in batch mode screenshots are a great help for analyzing
        errors. On the other hand a great number of screenshots lead to a big log-file.
        This is why the default value for <code>withScreenshots</code> is <code>false</code>.
      </p>
      
<p>
        Last, let's complete the test-case with 'Setup' and 'Cleanup' nodes
        and move it into the top part of the test-suite.
      </p>
      
<ul>
        
<li>
<span class="margin"><span class="note">Action</span></span>
          <strong>Copy the 'Setup' and 'Cleanup' nodes of
           'Test-set: Simple Tests' into the new test-case as the first and last node.</strong>
        
</li>
        
<li>
          
<strong>Move the test-case from the 'Extras' section
          into the top section of the test-suite after the 'Test-set: Simple Tests' node.</strong>
        
</li>
      
</ul>
      
<p>
        This is what the new test-case would look like:
      </p>
      
<a name="fig_ControlsTestcaseWin"></a><a name="figure_26.7"></a>
<table class="figure" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3"><a href="images/ControlsTestcaseWin.png" target="_blank"><img texscale=".66" src="images/ControlsTestcaseWin.png" width="445" height="242"></a></td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption"><a href="figures.html#list-of-figures">Figure&nbsp;26.7</a>:&nbsp;&nbsp;The new test-case</td><td class="captionglue"></td>
</tr>
</table>
      
<ul>
        
<li>
<span class="margin"><span class="note">Action</span></span>
          <strong>Execute the new test-case.</strong>
        
</li>
      
</ul>
      
<p>
        It should run without error.
      </p>
      
<ul>
        
<li>
<span class="margin"><span class="note">Action</span></span>
          <strong>Then modify a value in the
          details of the 'Check items' node</strong>, e.g. change the name of the car
          to <code>Wrong value</code>.
        </li>
      
</ul>
      
<a name="fig_ControlsCheckDetailsWin"></a><a name="figure_26.8"></a>
<table class="figure" cellspacing="0">
<tr>
<td class="margin">
<table class="margin"></table>
</td><td align="center" colspan="3"><a href="images/ControlsCheckDetails.png" target="_blank"><img texscale=".66" src="images/ControlsCheckDetails.png" width="393" height="681"></a></td>
</tr>
<tr>
<td class="margin">
<table class="margin"></table>
</td><td class="captionglue"></td><td class="caption"><a href="figures.html#list-of-figures">Figure&nbsp;26.8</a>:&nbsp;&nbsp;Details of the 'Check items' node</td><td class="captionglue"></td>
</tr>
</table>
      
<ul>
        
<li>
<span class="margin"><span class="note">Action</span></span>
          <strong>Execute the new test-case again.</strong>
        
</li>
      
</ul>
      
<p>
        This time the 'Else' node should be entered and you should get an error message.
      </p>
    
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="navifooter">
<tr>
<td class="margin"></td><td class="navicon"><a href="tutorial.html"><img src="../icons/linktop.png" width="34" height="36" border="0" alt="Top" title="Top"></a></td><td class="navicon"><a href="contents.html#table-of-contents"><img src="../icons/linktoc.png" width="34" height="36" border="0" alt="Table of contents" title="Table of contents"></a></td><td class="navicon"><a href="ifelsewin.html#sec_ifwin"><img src="../icons/linkprev.png" width="34" height="36" border="0" alt="Previous Chapter: 26.1&nbsp;If - else" title="Previous Chapter: 26.1&nbsp;If - else"></a></td><td class="navicon"><a href="ownappwin.html#sec_ownappwin"><img src="../icons/linkcont.png" width="34" height="36" border="0" alt="Next Page: 27&nbsp;It's time to start your own Application (Win)" title="Next Page: 27&nbsp;It's time to start your own Application (Win)"></a></td><td class="navicon"><img src="../icons/linknextdis.png" width="34" height="36" alt="" border="0"></td><td class="navicon"><a href="controlswin.html#sec_controlstructureswin"><img src="../icons/linkup.png" width="34" height="36" border="0" alt="Chapter Overview: 26&nbsp;Control structures (Win)" title="Chapter Overview: 26&nbsp;Control structures (Win)"></a></td><td class="navicon"><a href="../../tutorial_en.pdf" target="_parent"><img src="../icons/linkpdf.png" width="34" height="36" border="0" alt="PDF version" title="PDF version"></a></td><td class="navcopymod">Last update: 9/6/2022<br>Copyright &copy; 2002-2022 Quality First Software GmbH</td>
</tr>
</table>
</body>
</html>
